•	Install BIND9
Type:

Update package repository
sudo apt update

Install BIND9 and utilities
sudo apt install bind9 bind9utils bind9-doc dnsutils -y

Install additional tools for testing
sudo apt install dig nslookup -y

Verification:
Check if BIND9 is installed
bind9 -v

Check service status
sudo systemctl status bind9

•	Configure BIND9 Main Configuration

Create backup of original configuration
sudo cp /etc/bind/named.conf /etc/bind/named.conf.backup
sudo cp /etc/bind/named.conf.options /etc/bind/named.conf.options.backup
sudo cp /etc/bind/named.conf.local /etc/bind/named.conf.local.backup

•	Configure Main Options File
Edit the main options file
sudo nano /etc/bind/named.conf.options

Replace content with:
bashacl trusted {
    127.0.0.0/8;     # localhost
    10.0.0.0/8;      # Private networks
    172.16.0.0/12;   # Private networks
    192.168.0.0/16;  # Private networks
};

options {
    directory "/var/cache/bind";

    // Working directory
    dump-file "/var/cache/bind/cache_dump.db";
    statistics-file "/var/cache/bind/named_stats.txt";
    memstatistics-file "/var/cache/bind/named_mem_stats.txt";

    // Listen on all interfaces
    listen-on port 53 { any; };
    listen-on-v6 port 53 { any; };

    // Allow queries from trusted networks
    allow-query { trusted; };
    allow-recursion { trusted; };

    // Forwarders for external DNS queries
    forwarders {
        8.8.8.8;        # Google DNS
        8.8.4.4;        # Google DNS
        1.1.1.1;        # Cloudflare DNS
        1.0.0.1;        # Cloudflare DNS
    };

    // Forward first, then try to resolve
    forward first;

    // Enable recursion for caching
    recursion yes;

    // DNSSEC validation
    dnssec-validation auto;

    // Disable version queries for security
    version none;

    // Additional security options
    allow-transfer { none; };
    
    // Response policy zones (optional)
    response-policy { zone "rpz.local"; };
};

// Logging configuration
logging {
    channel default_debug {
        file "data/named.run";
        severity dynamic;
    };
    
    channel query_log {
        file "/var/log/named/query.log" versions 3 size 5m;
        severity info;
        print-time yes;
        print-category yes;
        print-severity yes;
    };
    
    category queries { query_log; };
};

•	Configure Local Zone

Edit the local zones configuration
sudo nano /etc/bind/named.conf.local  

•	Create Zone Directory and Files

Create zones directory
sudo mkdir -p /etc/bind/zones

Create log directory
sudo mkdir -p /var/log/named
sudo chown bind:bind /var/log/named


Create Forward Zone File
Create forward zone file
sudo nano /etc/bind/zones/db.myuniversity.local

Add the following content:
;
; BIND data file for myuniversity.local
;
$TTL    604800
@       IN      SOA     ns1.myuniversity.local. admin.myuniversity.local. (
                     2024010501         ; Serial (YYYYMMDDNN format)
                         604800         ; Refresh (1 week)
                          86400         ; Retry (1 day)
                        2419200         ; Expire (4 weeks)
                         604800 )       ; Negative Cache TTL (1 week)

; Name servers
@                       IN      NS      ns1.myuniversity.local.
@                       IN      NS      ns2.myuniversity.local.

; A records for name servers
ns1                     IN      A       192.168.1.10
ns2                     IN      A       192.168.1.11

; A records for university services
@                       IN      A       192.168.1.20        ; Main website
www                     IN      A       192.168.1.20        ; WWW
mail                    IN      A       192.168.1.21        ; Mail server
ftp                     IN      A       192.168.1.22        ; FTP server
webmail                 IN      A       192.168.1.23        ; Webmail
library                 IN      A       192.168.1.24        ; Library system
student                 IN      A       192.168.1.25        ; Student portal
faculty                 IN      A       192.168.1.26        ; Faculty portal
admin                   IN      A       192.168.1.27        ; Admin portal
lab                     IN      A       192.168.1.30        ; Lab server
lab1                    IN      A       192.168.1.31        ; Lab 1
lab2                    IN      A       192.168.1.32        ; Lab 2
lab3                    IN      A       192.168.1.33        ; Lab 3

; CNAME records (aliases)
portal                  IN      CNAME   student.myuniversity.local.
cms                     IN      CNAME   www.myuniversity.local.
intranet                IN      CNAME   admin.myuniversity.local.

; MX record for mail
@                       IN      MX      10      mail.myuniversity.local.

; TXT records
@                       IN      TXT     "v=spf1 mx ~all"
@                       IN      TXT     "myuniversity.local domain"




Create Reverse Zone File

sudo nano /etc/bind/zones/db.192.168.1

;
; BIND reverse data file for 192.168.1.0/24
;
$TTL    604800
@       IN      SOA     ns1.myuniversity.local. admin.myuniversity.local. (
                     2024010501         ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL

; Name servers
@                       IN      NS      ns1.myuniversity.local.
@                       IN      NS      ns2.myuniversity.local.

; PTR records
10                      IN      PTR     ns1.myuniversity.local.
11                      IN      PTR     ns2.myuniversity.local.
20                      IN      PTR     www.myuniversity.local.
21                      IN      PTR     mail.myuniversity.local.
22                      IN      PTR     ftp.myuniversity.local.
23                      IN      PTR     webmail.myuniversity.local.
24                      IN      PTR     library.myuniversity.local.
25                      IN      PTR     student.myuniversity.local.
26                      IN      PTR     faculty.myuniversity.local.
27                      IN      PTR     admin.myuniversity.local.
30                      IN      PTR     lab.myuniversity.local.
31                      IN      PTR     lab1.myuniversity.local.
32                      IN      PTR     lab2.myuniversity.local.
33                      IN      PTR     lab3.myuniversity.local.

•	Set Permissions and Ownership

Set proper ownership for all BIND files
sudo chown -R bind:bind /etc/bind/
sudo chown -R bind:bind /var/cache/bind/
sudo chown -R bind:bind /var/log/named/

Set proper permissions
sudo chmod -R 755 /etc/bind/zones/
sudo chmod 644 /etc/bind/zones/*
sudo chmod 644 /etc/bind/named.conf*

•	Check Configuration Syntax
Check main configuration
sudo named-checkconf

Check forward zone
sudo named-checkzone myuniversity.local /etc/bind/zones/db.myuniversity.local

Check reverse zone
sudo named-checkzone 1.168.192.in-addr.arpa /etc/bind/zones/db.192.168.1

Check RPZ zone
sudo named-checkzone rpz.local /etc/bind/zones/db.rpz.local

•	Start and Enable BIND9 Service
Start BIND9 service
sudo systemctl start bind9

Enable BIND9 to start at boot
sudo systemctl enable bind9

Check service status
sudo systemctl status bind9


•	Configure Firewall
Allow DNS traffic
sudo ufw allow 53/udp
sudo ufw allow 53/tcp

Check firewall status
sudo ufw status

•	Test DNS Configuration
Test forward lookup
nslookup www.myuniversity.local 127.0.0.1
dig @127.0.0.1 www.myuniversity.local

 

Test reverse lookup
nslookup 192.168.1.20 127.0.0.1
dig @127.0.0.1 -x 192.168.1.20

 

Test external DNS (caching functionality)
nslookup google.com 127.0.0.1
dig @127.0.0.1 google.com